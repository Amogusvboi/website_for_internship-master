<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    /* Custom styles for the page */
    /* ... CSS styles here ... */
  </style>
</head>

<body>
  <!-- Navigation bar -->
  <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="#">
      <img src="hamburger.png" alt="Logo">
    </a>
    <div class="ml-auto" id="navbarRight">
      <button class="btn btn-outline-light mr-2 btn-signup" onclick="redirectToRegister()">Sign Up</button>
      <button class="btn btn-yellow" id="loginButton" onclick="redirectToLogin()">Log in</button>
    </div>
  </nav>

  <!-- First container -->
  <div class="custom-container scroll-trigger">
    <div class="header">
      <h1 class="internship">Internship</h1>
      <p class="consult">at Tower Consult GmbH</p>
    </div>
  </div>

  <!-- Second container -->
  <div class="second-container visible">
    <div>
      <h1>Port scanner</h1>
    </div>
    <div>
      <h1>Password cracker</h1>
    </div>
    <div>
      <h1>Hash decoder</h1>
    </div>
  </div>

  <!-- Sidebar -->
  <div class="sidebar-user-account" id="sidebar-user-account">
    <!-- Sidebar content goes here -->
  </div>

  <!-- Popup -->
  <div class="popup" id="loginPopup">
    <div class="popup-content">
      <span class="close-button" onclick="closePopup('loginPopup')">&times;</span>
      <h2 class="login-header">Log in</h2>
      <input type="text" placeholder="Username">
      <input type="password" placeholder="Password">
      <button onclick="handleSuccessfulLogin('JohnDoe')">Log in</button>
    </div>
  </div>

  <script>
    // Intersection Observer callback function
    function handleIntersection(entries, observer) {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }
  
    // Create an Intersection Observer
    const observer = new IntersectionObserver(handleIntersection, {
      root: null,
      rootMargin: '-200px', // Adjust the rootMargin as needed
      threshold: 0.2, // Adjust the threshold as needed
    });
  
    // Get all elements with the 'scroll-trigger' class
    const scrollTriggerElements = document.querySelectorAll('.scroll-trigger');
  
    // Observe each scroll-trigger element
    scrollTriggerElements.forEach((element) => {
      observer.observe(element);
    });
  
    function redirectToRegister() {
      window.location.href = "register.html";
    }
  
    // Function to redirect to the login page
    function redirectToLogin() {
      window.location.href = "login.html";
    }
  
    // Open sidebar
    function openSidebar() {
      const sidebar = document.getElementById('sidebar-user-account');
      sidebar.classList.add('open');
    }
  
    // Close sidebar
    function closeSidebar() {
      const sidebar = document.getElementById('sidebar-user-account');
      const userCircle = document.querySelector('.user-circle');
      setTimeout(function () {
        if (!sidebar.matches(':hover') && !userCircle.matches(':hover')) {
          sidebar.classList.remove('open');
        }
      }, 500); // Delay in milliseconds (0.5 seconds)
    }
  
    // Add event listener to user-circle for opening the sidebar
    const userCircle = document.querySelector('.user-circle');
    userCircle.addEventListener('mouseover', openSidebar);
  
    // Add event listener to sidebar for keeping it open
    const sidebar = document.getElementById('sidebar-user-account');
    sidebar.addEventListener('mouseover', openSidebar);
    sidebar.addEventListener('mouseout', closeSidebar);
  
    // Add event listener to document for closing the sidebar
    document.addEventListener('mouseout', function (event) {
      if (
        !event.relatedTarget ||
        (!event.relatedTarget.closest('#sidebar-user-account') && !event.relatedTarget.closest('.user-circle'))
      ) {
        closeSidebar();
      }
    });
  
    // Close the popup
    function closePopup(popupId) {
      const popup = document.getElementById(popupId);
      popup.classList.remove('show');
    }
  
    // Function to handle successful login
    function handleSuccessfulLogin(username) {
      // Disable register and login buttons
      const registerButton = document.querySelector('.btn-signup');
      const loginButton = document.getElementById('loginButton');
      registerButton.disabled = true;
      loginButton.disabled = true;
  
      // Update greeting message
      const greetingMessage = document.createElement('span');
      greetingMessage.textContent = 'Hello, ' + username;
      greetingMessage.classList.add('user-username');
      const navbarRight = document.getElementById('navbarRight');
      navbarRight.insertBefore(greetingMessage, navbarRight.firstChild);
  
      // Create logout button
      const logoutButton = document.createElement('button');
      logoutButton.textContent = 'Logout';
      logoutButton.classList.add('btn', 'btn-danger', 'ml-2');
      logoutButton.addEventListener('click', handleLogout);
      navbarRight.appendChild(logoutButton);
    }
  
    // Function to handle logout
    function handleLogout() {
      // Enable register and login buttons
      const registerButton = document.querySelector('.btn-signup');
      const loginButton = document.getElementById('loginButton');
      registerButton.disabled = false;
      loginButton.disabled = false;
  
      // Remove greeting message and logout button
      const greetingMessage = document.querySelector('.user-username');
      const logoutButton = document.querySelector('.btn-danger');
      greetingMessage.parentNode.removeChild(greetingMessage);
      logoutButton.parentNode.removeChild(logoutButton);
    }
  </script>
  
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" defer></script>
</body>

</html>